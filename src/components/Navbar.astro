---
import LanguagesPicker from '@/components/LanguagesPicker.astro';
import {getLangFromUrl, useTranslations} from '@/i18n/utils';
import { getRelativeLocaleUrl } from 'astro:i18n';

const {currentLocale} = Astro;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---
<section>
  <nav id="navbar" class="fixed w-full z-30 top-0 left-0 bg-transparent transition-colors duration-300 ml-auto">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4 md:pl-0">
      <a href="/" class="flex items-center">
        <img id="logo" src="/images/Logo/Isologo HDC-01.svg" class="sm:h-28 h-16 mr-1 transition-all duration-300" alt="Logo" />
      </a>
      <button id="menu-toggle" type="button"
        class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-200 rounded-lg md:hidden hover:bg-transparent focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
        aria-controls="navbar-default" aria-expanded="false">
        <span class="sr-only">Open main menu</span>
        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M1 1h15M1 7h15M1 13h15"></path>
        </svg>
      </button>
      <div class="w-full md:block md:w-auto hidden" id="navbar-default">
        <ul class="flex flex-col text-2xl p-0 mt-4 font-light border border-gray-200 rounded-lg md:flex-row md:space-x-1 md:mt-0 md:border-0 ml-auto">
          <li>
            <a href= {getRelativeLocaleUrl( currentLocale ?? '', '')}
              aria-current="page"
              class="flex-row justify-center text-white cursor-pointer font-medium rounded-lg px-3 py-2 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 hover:shadow-lg transition-all duration-200 ease-in-out hover:scale-110 scale-90 opacity-90 hover:opacity-100 navbar-button">
              {t('nav.home')}
            </a>
          </li>
          <li>
            <a href={`${getRelativeLocaleUrl(currentLocale ?? '')}#pilares`}
              class="flex-row justify-center text-white cursor-pointer font-medium rounded-lg px-3 py-2 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 hover:shadow-lg transition-all duration-200 ease-in-out hover:scale-110 scale-90 opacity-90 hover:opacity-100 navbar-button">
              {t('nav.pilares')}
            </a>
          </li>
          <li>
           <a href={`${getRelativeLocaleUrl(currentLocale ?? '')}#staff`}
              class="flex-row justify-center text-white cursor-pointer font-medium rounded-lg px-3 py-2 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 hover:shadow-lg transition-all duration-200 ease-in-out hover:scale-110 scale-90 opacity-90 hover:opacity-100 navbar-button">
              {t('nav.staff')}
            </a>
          </li>
          <li>
            <a href= {getRelativeLocaleUrl( currentLocale ?? '', '/productos-destacados')}
              class="flex-row justify-center text-white cursor-pointer font-medium rounded-lg px-3 py-2 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 hover:shadow-lg transition-all duration-200 ease-in-out hover:scale-110 scale-90 opacity-90 hover:opacity-100 navbar-button">
              {t('nav.ProductosDestacados')}
            </a>
          </li>
          <li class="relative group">
            <a href="#" class="flex-row justify-center text-white cursor-pointer font-medium rounded-lg px-3 py-2 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 hover:shadow-lg transition-all duration-200 ease-in-out hover:scale-110 scale-90 opacity-90 hover:opacity-100 navbar-button">
              {t('nav.Colecciones')}
              <svg class="ml-1 w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </a>
            <ul class="dropdown-menu absolute left-0 hidden group-hover:block w-full">
              <li>
                <a href= {getRelativeLocaleUrl( currentLocale ?? '', '/remate-2023')}
                  class="block px-4 py-2 text-sm ">{t('nav.Coleccion2023')}</a>
              </li>
              <li>
                <a href= {getRelativeLocaleUrl( currentLocale ?? '', '/remate-2024')}
                  class="block px-4 py-2 text-sm ">{t('nav.Coleccion2024')}</a>
              </li>
            </ul>
          </li>
          <li>
            <a href= {getRelativeLocaleUrl( currentLocale ?? '', '/yeguas-madres')}
              class="flex-row justify-center text-white cursor-pointer font-medium rounded-lg px-3 py-2 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 hover:shadow-lg transition-all duration-200 ease-in-out hover:scale-110 scale-90 opacity-90 hover:opacity-100 navbar-button">
              {t('nav.YeguasMadre')}
            </a>
          </li>
          <li>
            <a href={`${getRelativeLocaleUrl(currentLocale ?? '')}#contacto`}
              class="flex-row justify-center text-white cursor-pointer font-medium rounded-lg px-3 py-2 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 hover:shadow-lg transition-all duration-200 ease-in-out hover:scale-110 scale-90 opacity-90 hover:opacity-100 navbar-button">
              {t('nav.Contacto')}
            </a>
          </li>
          <li>
            <LanguagesPicker />
          </li>
        </ul>
      </div>
    </div>
  </nav>
</section>

<style>
  .btn-brand-color {
    background-color: #ab994b;
  }

  .btn-brand-color:hover {
    background-color: #ab994b;
  }

  .background-navbar {
    background: linear-gradient(180deg,
        rgba(182, 142, 72, 0.589) 0%,
        rgba(204, 159, 82, 0.404) 41%,
        rgba(221, 172, 88, 0.02) 100%);
  }

  .scrolled-background {
    backdrop-filter: blur(10px);
    background-color: #9c925d57;
  }

  .scrolled-logo {
    background-color: transparent;
    padding: 5px;
    border-radius: 5px;
  }

  .scrolled-text {
    color: #fff;
  }

  .navbar-button {
    position: relative;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    margin: 5px;
    color: #fff;
    font-size: 17px;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .navbar-button:hover::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: #ab994b;
    visibility: visible;
    transform: scaleX(1);
    transition: all 0.3s ease-in-out;
  }

  .navbar-button::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: #ab994b;
    visibility: hidden;
    transform: scaleX(0);
    transition: all 0.3s ease-in-out;
  }

  @media (min-width: 768px) {
  .dropdown-menu {
    background-color: #fff; 
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-radius: 10px;
  }

  .dropdown-menu li a {
    color: #ab994b; 
    padding: 12px 16px;
  }

  .dropdown-menu li a:hover {
    background-color: #ab994b; 
    color: #fff;
    border-radius: 5px;
  }
}


  @media (max-width: 767px) {
    #navbar-default {
      background-color: #fff;
      padding: 8px;
      border-radius: 5px;
    }

    .navbar-button {
      transition: background-color 0.3s ease;
      padding: 8px 12px;
      border-radius: 8px;
      margin-bottom: 4px;
      color: #ab994b;
    }

    .navbar-button:hover {
      background-color: #ab994b;
      color: #fff;
    }

    .dropdown-menu {
      background-color: #fff;
      border-radius: 8px;
      padding: 0;
      margin: 0;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      position: absolute; 
      top: 100%;
      left: 0;
      width: 100%; 
      z-index: 10; 
    }

    .dropdown-menu li a {
      display: block;
      padding: 12px 16px;
      color: #ab994b; 
      padding: 12px 16px;
      text-align: center;
    }

    .dropdown-menu li a:hover {
      background-color: #ab994b; 
      color: #fff;
      border-radius: 10px;
    }
  }

  @media (min-width: 768px) {
    .navbar-button {
      margin: 0 10px;
    }

    .navbar-button::before {
      height: 4px;
    }
  }

  .group-hover\:block:hover > ul {
    display: block;
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menu-toggle');
    const navbarMenu = document.getElementById('navbar-default');
    const navbar = document.getElementById('navbar');
    const logo = document.getElementById('logo');

    if (menuToggle && navbarMenu) {
      menuToggle.addEventListener('click', function() {
        navbarMenu.classList.toggle('hidden');
      });
    }

    if (navbar) {
      window.addEventListener('scroll', function() {
        const scrollPosition = window.scrollY;

        if (scrollPosition > 50) {
          navbar.classList.add('scrolled-background');
          if (logo) logo.classList.add('scrolled-logo');
        } else {
          navbar.classList.remove('scrolled-background');
          if (logo) logo.classList.remove('scrolled-logo');
        }
      });
    }
  });
</script>